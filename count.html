<!DOCTYPE html>
<html>

<head>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-114881459-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-114881459-1');
    </script>

    <link rel="apple-touch-icon" sizes="57x57" href="icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="icons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="icons/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="icons/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta name="robots" content="all" />
    <meta name="MSSmartTagsPreventParsing" content="true" />
    <meta http-equiv="imagetoolbar" content="false" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style2.css">
</head>

<body id="page" style="background-color: #2ecc71;">

    <p id="timeRemaining"></p>
    <p style="font-size: 25px;">avant la fin de l'année</p>
    <p id="hoursRemaining"></p>
    <p style="font-size: 25px;">heures de cours restantes</p>

    <div style="display: flex; justify-content: center; margin: 1em; font-size: 2em">
        Rattrapages?
        <br/>
    </div>
    <!-- Rounded switch -->
    <div id="check">
        <label class="switch">
            <input type="checkbox" id="check_rat" onchange="update(this);">
            <span class="slider round"></span>
        </label>
    </div>
    <div style="display: flex; justify-content: center; margin: 1em; font-size: 2em">
        Redoublement?
        <br/>
    </div>
    <!-- Rounded switch -->
    <div id="check">
        <label class="switch">
            <input type="checkbox" id="check_red" onchange="update(this);">
            <span class="slider round"></span>
        </label>
    </div>
    <p id="dur" style="margin: 1em">ez</p>

    <script>
        var hoursRemaining = 0;
        function logResults(json){
            /*console.log(json["totalHours"])*/
            hoursRemaining = json["totalHours"]
            document.getElementById("hoursRemaining").innerHTML = hoursRemaining
        }

        $.ajax({
          url: "https://omnitrogen.pythonanywhere.com/getHours",
          dataType: "jsonp",
          jsonpCallback: "logResults"
        });
    </script>


    <script>
    // Set the date we're counting down to
    var countDownDate = new Date("Jun 6, 2018 20:00:00").getTime();

    function update(feature) {
        if (document.getElementById("check_rat").checked == false && document.getElementById("check_red").checked == false) {
            countDownDate = new Date("Jun 6, 2018 20:00:00").getTime();
            document.getElementById("page").style.backgroundColor = "#2ecc71"
            document.getElementById("dur").innerHTML = "ez"
            document.getElementById("hoursRemaining").innerHTML = hoursRemaining
        }
        if (document.getElementById("check_rat").checked == true && document.getElementById("check_red").checked == false) {
            countDownDate = new Date("Jun 30, 2018 20:00:00").getTime();
            document.getElementById("page").style.backgroundColor = "orange"
            document.getElementById("dur").innerHTML = "duuuur"
            document.getElementById("hoursRemaining").innerHTML = hoursRemaining
        }
        if (document.getElementById("check_rat").checked == false && document.getElementById("check_red").checked == true) {
            countDownDate = new Date("Jun 6, 2019 20:00:00").getTime();
            document.getElementById("page").style.backgroundColor = "grey"
            document.getElementById("dur").innerHTML = "gnéééé?"
            document.getElementById("hoursRemaining").innerHTML = "gnéééé?"
        }
        if (document.getElementById("check_rat").checked == true && document.getElementById("check_red").checked == true) {
            countDownDate = new Date("Jun 30, 2019 20:00:00").getTime();
            document.getElementById("page").style.backgroundColor = "#c0392b"
            document.getElementById("dur").innerHTML = "R.I.P."
            document.getElementById("hoursRemaining").innerHTML = "beaucoup trop d'"
        }
    }

    // Update the count down every second
    var x = setInterval(function() {

        // Get todays date and time
        var now = new Date().getTime();

        // Find the distance between now an the count down date
        var distance = countDownDate - now;

        // Time calculations for days, hours, minutes and seconds
        var days = Math.floor(distance / (1000 * 60 * 60 * 24));
        var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((distance % (1000 * 60)) / 1000);

        // Output the result in an element with id="timeRemaining"
        document.getElementById("timeRemaining").innerHTML = days + "j " + hours + "h " +
            minutes + "m " + seconds + "s";

        // If the count down is over, write some text
        if (distance < 0) {
            clearInterval(x);
            document.getElementById("timeRemaining").innerHTML = "LET THE FUN BEGIN! FiNaLlY :o :o :o ";
        }
    }, 100);
    </script>
    </body>
</html>